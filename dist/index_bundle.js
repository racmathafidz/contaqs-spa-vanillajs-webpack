(()=>{"use strict";function e(e){const t=document.createElement("a");return t.href=e.href,t.textContent=e.label,t.onclick=t=>{t.preventDefault(),s({path:new URL(t.target.href).pathname}),e.onClick&&e.onClick()},t}function t(){const e=document.createElement("p");return e.textContent=" ",e}function n(e){const t=l.favoriteContacts.some((t=>t.id===e.id)),n=document.createElement("button");return n.textContent=t?"Remove from favorite":"Add to favorite",n.onclick=function(){s(t?{favoriteContacts:l.favoriteContacts.filter(((t,n)=>t.id!==e.id))}:{favoriteContacts:[...l.favoriteContacts,e]})},n}function a(){const e=document.createElement("span");return e.textContent=" | ",e}function o(t){let o=t.map((t=>function(t){const o=e({href:"/contact-detail",label:`${t.firstName} ${t.lastName}`,onClick:()=>{s({contactId:t.id})}}),c=document.createElement("span");c.textContent=t.phone;const r=a(),l=a(),i=n(t),p=document.createElement("div");return p.append(o),p.append(r),p.append(c),p.append(l),p.append(i),p}({id:t.id,firstName:t.firstName,lastName:t.lastName,phone:t.phone})));const c=document.createElement("p");c.textContent="Loading Contacts...";const r=document.createElement("p");r.textContent="Contact Empty";const i=document.createElement("p");i.textContent=l.errorMessage;const p=document.createElement("div");return l.loadingUsers?p.append(c):""!==l.errorMessage?p.append(i):0==l.contacts.length?p.append(r):p.append(...o),p}function c(){const c=function(){const n=document.createElement("div");return n.append(function(){const n=e({href:"/home",label:"Home"}),o=e({href:"/favorite",label:"Favorite"}),c=a(),r=t(),l=document.createElement("div");return l.append(n),l.append(c),l.append(o),l.append(r),l}()),n.append(function(){const e=document.createElement("input");e.id="input",e.value=l.inputValue,e.placeholder="Enter contact name",e.oninput=function(e){s({inputValue:e.target.value})};const n=document.createElement("button");n.textContent="X",n.onclick=function(){s({inputValue:""})};const a=t(),o=document.createElement("div");return o.append(e),o.append(n),o.append(a),o}()),n.append(o(l.contacts)),n.append(function(){let n=[...Array(l.totalOfPages)].map(((t,n)=>e({href:"/home",label:`${n+1}`,onClick:()=>{s({pageSkip:5*n})}})));const a=t(),o=document.createElement("div");return o.append(a),""===l.inputValue&&o.append(...n),o}()),n}(),r=function(){const n=e({href:"/home",label:"Kembali ke Home"}),a=document.createElement("div");return a.append(n),a.append(t()),a.append(o(l.favoriteContacts)),a}(),i=function(){const a=e({href:"/home",label:"Kembali ke Home"}),o=document.createElement("div");return o.append(a),o.append(t()),o.append(function(){const e=document.createElement("p");e.textContent="Loading Contacts...";const t=document.createElement("p");t.textContent="Contact Empty";const a=document.createElement("p");a.textContent=l.errorMessage;const o=document.createElement("div");return l.loadingDetailUsers?o.append(e):""!==l.errorMessage?o.append(a):null===l.detailContact?o.append(t):o.append(function(e){const t=document.createElement("p");t.textContent=`${e.firstName} ${e.lastName}`;const a=document.createElement("p");a.textContent=e.gender;const o=document.createElement("p");o.textContent=`${e.age} years old`;const c=document.createElement("p");c.textContent=e.phone;const r=document.createElement("p");r.textContent=e.email;const l=n(e),s=document.createElement("div");return s.append(t),s.append(a),s.append(o),s.append(c),s.append(r),s.append(l),s}(l.detailContact)),o}(l.detailContact)),o}();return"/favorite"===l.path?r:"/home"===l.path?c:"/contact-detail"===l.path?i:c}let r,l={path:window.location.pathname,inputValue:localStorage.getItem("inputValue")??"",loadingDetailUsers:!1,loadingUsers:!1,contacts:[],favoriteContacts:[],detailContact:null,contactId:new URL(window.location.href).searchParams.get("id"),errorMessage:"",totalOfPages:0,pageSkip:0};function s(e){const t={...l},n={...l,...e};l=n,i(t,n),p()}function i(e,t){if(e.path!=t.path){const e=new URL(window.location.href);e.search="",e.path=t.path,history.pushState(null,"",e.toString())}if(e.inputValue!==t.inputValue&&(s({pageSkip:0}),fetch("https://dummyjson.com/users").then((e=>e.json())).then((e=>{s({loadingUsers:!1,totalOfPages:Math.ceil(e.users.length/5),errorMessage:""})})).catch((e=>s({loadingUsers:!1,totalOfPages:0,errorMessage:e.message})))),e.contactId!==t.contactId){const e=new URL(window.location.href);null===t.contactId?e.searchParams.delete("id"):(e.searchParams.set("id",t.contactId),s({loadingDetailUsers:!0}),(n=t.contactId,fetch(`https://dummyjson.com/users/${n}`).then((e=>e.json()))).then((e=>{s({loadingDetailUsers:!1,detailContact:e,errorMessage:""})})).catch((e=>s({loadingDetailUsers:!1,detailContact:null,errorMessage:e.message})))),history.pushState({},null,e.toString())}var n;e.inputValue===t.inputValue&&e.pageSkip===t.pageSkip||(localStorage.setItem("inputValue",t.inputValue),s({loadingUsers:!0}),r&&clearTimeout(r),r=setTimeout((()=>{(function({query:e,limit:t,skip:n}){return fetch(`https://dummyjson.com/users/search?q=${e}&limit=${t}&skip=${n}`).then((e=>e.json()))})({query:t.inputValue,limit:5,skip:t.pageSkip}).then((e=>{s({loadingUsers:!1,contacts:e.users,errorMessage:""})})).catch((e=>s({loadingUsers:!1,contacts:[],errorMessage:e.message})))}),600))}function p(){const e=document.getElementById("root"),t=c(),n=document.activeElement.id,a=document.activeElement.selectionStart,o=document.activeElement.selectionEnd;if(e.innerHTML="",e.appendChild(t),n){const e=document.getElementById(n);e.focus(),e.selectionStart=a,e.selectionEnd=o}}p(),i({path:null,inputValue:null,loadingDetailUsers:null,loadingUsers:null,contacts:null,favoriteContacts:null,detailContact:null,errorMessage:null,totalOfPages:0,pageSkip:null},l)})();